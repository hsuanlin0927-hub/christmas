<!doctype html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>è–èª•å¿«æ¨‚ï½œå¿«é€Ÿé€£çµ</title>
  <style>
    :root{
      --bg1:#07131f; --bg2:#0c1e2f;
      --card:#0f2234cc; --line:#ffffff1a;
      --text:#eaf3ff; --muted:#b9c9da;
      --accent:#ffd36b;

      --green1:#0f6b3d; --green2:#0a4d2c; --wood:#7a4a2b;
      --gold:#f6d26b;

      --sheep:#ffffff; --sheep2:#f2f4ff;
      --pink:#ffb8c8;
    }

    *{box-sizing:border-box}
    html,body{height:100%}
    body{
      margin:0;
      font-family: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans TC", "PingFang TC", "Microsoft JhengHei", Arial;
      color:var(--text);
      background:
        radial-gradient(1100px 700px at 60% -10%, #1d4b6a55, transparent 60%),
        radial-gradient(900px 600px at 10% 0%, #2b7a5a33, transparent 55%),
        linear-gradient(180deg, var(--bg1), var(--bg2));
      overflow-x:hidden;
    }

    /* é›ªèŠ± */
    .snow{ position:fixed; inset:0; pointer-events:none; z-index:0; overflow:hidden; }
    .flake{
      position:absolute; top:-10vh;
      width:6px;height:6px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, #ffffff88 60%, transparent 70%);
      opacity:.9; filter: blur(.2px);
      animation: fall linear infinite, drift ease-in-out infinite;
    }
    @keyframes fall{ to{ transform: translateY(120vh);} }
    @keyframes drift{ 0%,100%{ margin-left:0 } 50%{ margin-left: 40px } }

    /* ç‰ˆé¢ */
    .wrap{ position:relative; z-index:1; max-width:1200px; margin:0 auto; padding:28px 18px 44px; }
    header{ display:flex; align-items:flex-end; justify-content:space-between; gap:16px; margin-bottom:18px; }
    .title{ display:flex; flex-direction:column; gap:6px; }
    h1{ margin:0; font-size:clamp(22px,3vw,34px); letter-spacing:.5px; }
    .sub{ margin:0; color:var(--muted); font-size:14px; line-height:1.5; }

    .actions{ display:flex; gap:10px; flex-wrap:wrap; justify-content:flex-end; }
    .btn{
      border:1px solid var(--line);
      background:#0e1f30aa;
      color:var(--text);
      padding:10px 12px;
      border-radius:14px;
      cursor:pointer;
      display:inline-flex;
      gap:8px;
      align-items:center;
      user-select:none;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      backdrop-filter: blur(6px);
    }
    .btn:hover{ transform: translateY(-1px); border-color:#ffffff33; background:#112a41cc; }
    .btn:active{ transform: translateY(0px) scale(.99); }
    .btn small{ color:var(--muted); font-size:12px; }

    .grid{ display:grid; grid-template-columns: 1.05fr .95fr; gap:18px; align-items:stretch; }
    @media (max-width: 940px){
      .grid{ grid-template-columns:1fr; }
      header{ align-items:flex-start; flex-direction:column; }
      .actions{ justify-content:flex-start; }
    }

    /* å¡ç‰‡ */
    .card{
      border:1px solid var(--line);
      border-radius:20px;
      background: var(--card);
      backdrop-filter: blur(10px);
      box-shadow: 0 16px 50px #00000044;
      overflow:hidden;
    }
    .cardHead{
      padding:14px 16px;
      border-bottom:1px solid var(--line);
      display:flex; align-items:center; justify-content:space-between; gap:12px;
    }
    .cardHead .label{ display:flex; gap:10px; align-items:center; }
    .dot{
      width:10px;height:10px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, var(--accent), #ffefb5);
      box-shadow:0 0 18px #ffdb7a88;
    }
    .cardHead h2{ margin:0; font-size:16px; letter-spacing:.4px; }
    .cardBody{ padding:16px; }

    /* é€£çµæ¸…å–® */
    .links{ display:grid; grid-template-columns: 1fr 1fr; gap:12px; }
    @media (max-width:520px){ .links{ grid-template-columns:1fr; } }

    a.link{
      text-decoration:none;
      color:var(--text);
      border:1px solid var(--line);
      border-radius:16px;
      padding:12px 12px;
      display:flex;
      flex-direction:column;
      gap:8px;
      background:#0d1f2f88;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      min-height:86px;
      position:relative;
      overflow:hidden;
    }
    a.link:hover{ transform: translateY(-1px); border-color:#ffffff33; background:#102a41cc; }
    .t{ font-weight:750; letter-spacing:.2px; display:flex; align-items:center; gap:8px; justify-content:space-between; }
    .t .left{ display:flex; align-items:center; gap:8px; }
    .d{ color:var(--muted); font-size:12.5px; line-height:1.45; }
    .badge{
      font-size:11px; padding:3px 8px; border-radius:999px;
      border:1px solid #ffffff22; color:#eaf3ffcc; width:max-content; white-space:nowrap;
    }

    /* å¡ç‰‡å³ä¸Šè§’çš„å°å·¥å…·ï¼ˆç·¨è¼¯/åˆªé™¤ï¼‰ */
    .tools{ display:flex; gap:8px; opacity:.95; }
    .iconBtn{
      border:1px solid #ffffff22; background:#0b1c2caa; color:#eaf3ffdd;
      border-radius:10px; padding:6px 8px; cursor:pointer;
      font-size:12px; line-height:1;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
      user-select:none;
    }
    .iconBtn:hover{ transform: translateY(-1px); border-color:#ffffff33; background:#0f253aff; }
    .iconBtn:active{ transform: translateY(0px) scale(.99); }

    /* å³å´ï¼šå ´æ™¯ */
    .sceneWrap{ display:flex; flex-direction:column; gap:12px; }
    .scene{
      position:relative;
      height:440px;
      border-radius:20px;
      border:1px solid var(--line);
      background:
        radial-gradient(420px 220px at 30% 12%, #ffffff14, transparent 60%),
        radial-gradient(520px 260px at 80% 0%, #9fffd315, transparent 55%),
        linear-gradient(180deg, #0a1c2c, #07131f);
      overflow:hidden;
    }
    @media (max-width:940px){ .scene{ height:390px; } }

    .ground{
      position:absolute; left:-10%; right:-10%; bottom:-22px;
      height:150px;
      background: radial-gradient(1200px 180px at 50% 0%, #ffffff22, transparent 70%),
                  linear-gradient(180deg, #ffffff10, #ffffff00);
      border-top:1px solid #ffffff1a;
      filter: blur(.2px);
    }

    /* è–èª•æ¨¹ */
    .tree{
      position:absolute;
      left:56%;
      transform: translateX(-50%);
      bottom:72px;
      width:260px;
      height:310px;
      z-index:2;
    }
    .tree .layer{
      position:absolute; left:50%;
      transform: translateX(-50%);
      width:0; height:0;
      border-left: 120px solid transparent;
      border-right:120px solid transparent;
      border-bottom: 150px solid var(--green1);
      filter: drop-shadow(0 12px 14px #00000055);
    }
    .tree .layer.l1{ top:0; border-bottom-color:#0f6b3d; transform: translateX(-50%) scale(1.02); }
    .tree .layer.l2{ top:64px; border-left-width: 135px; border-right-width:135px; border-bottom-width: 168px; border-bottom-color:#0c5b34; }
    .tree .layer.l3{ top:132px; border-left-width: 155px; border-right-width:155px; border-bottom-width: 190px; border-bottom-color: var(--green2); }

    .trunk{
      position:absolute; left:50%; transform: translateX(-50%);
      bottom:-12px; width:64px; height:70px;
      background: linear-gradient(180deg, #8a5633, var(--wood));
      border-radius: 10px;
      box-shadow: 0 10px 18px #00000055;
      border:1px solid #00000022;
    }

    /* æ˜Ÿæ˜Ÿ */
    .star{
      position:absolute; left:50%; top:-10px; transform: translateX(-50%);
      width:0; height:0;
      border-left: 16px solid transparent;
      border-right:16px solid transparent;
      border-bottom: 28px solid var(--gold);
      filter: drop-shadow(0 0 14px #ffd778aa);
      animation: starPulse 1.5s ease-in-out infinite;
    }
    .star:after{
      content:"";
      position:absolute; left:-16px; top:8px;
      width:0; height:0;
      border-left: 16px solid transparent;
      border-right:16px solid transparent;
      border-top: 28px solid var(--gold);
    }
    @keyframes starPulse{
      0%,100%{ transform: translateX(-50%) scale(1); filter: drop-shadow(0 0 14px #ffd778aa); }
      50%{ transform: translateX(-50%) scale(1.08); filter: drop-shadow(0 0 24px #ffe49bdd); }
    }

    /* ç‡ˆæ³¡ */
    .lights{ position:absolute; inset:0; pointer-events:none; }
    .bulb{
      position:absolute;
      width:10px; height:10px; border-radius:50%;
      background: #fff;
      box-shadow: 0 0 14px #ffffffaa;
      opacity:.85;
      animation: blink 1.2s infinite;
    }
    .bulb.b1{ background:#ff6b6b; box-shadow:0 0 18px #ff6b6bcc; }
    .bulb.b2{ background:#6bffcf; box-shadow:0 0 18px #6bffcfcc; }
    .bulb.b3{ background:#6bb0ff; box-shadow:0 0 18px #6bb0ffcc; }
    .bulb.b4{ background:#ffd36b; box-shadow:0 0 18px #ffd36bcc; }
    @keyframes blink{
      0%,100%{ transform: scale(.82); opacity:.55; filter: saturate(1); }
      50%{ transform: scale(1.22); opacity:1; filter: saturate(1.25); }
    }

    /* ç¦®ç‰©ç›’ */
    .gifts{
      position:absolute;
      left:60%;
      transform: translateX(-50%);
      bottom:18px;
      width:360px;
      height:120px;
      display:flex;
      gap:14px;
      align-items:flex-end;
      justify-content:center;
      z-index:2;
    }
    .gift{
      position:relative;
      width:108px; height:86px;
      border-radius:14px;
      background: linear-gradient(180deg, #d94b4b, #b93636);
      border:1px solid #00000022;
      box-shadow: 0 14px 24px #00000055;
      cursor:pointer;
      transform-origin: 50% 100%;
      transition: transform .25s ease;
    }
    .gift:hover{ transform: translateY(-2px) scale(1.01); }
    .gift.blue{ background: linear-gradient(180deg, #3f7cff, #2f58c7); }
    .gift.green{ background: linear-gradient(180deg, #2fbf7a, #1f8e5a); }

    .ribbonV, .ribbonH{
      position:absolute;
      background: linear-gradient(180deg, #ffd36b, #f2b84d);
      box-shadow: inset 0 0 0 1px #0000001c;
    }
    .ribbonV{ width:16px; height:100%; left:50%; transform: translateX(-50%); border-radius:10px; }
    .ribbonH{ height:16px; width:100%; top:38px; border-radius:10px; }

    /* ç›’è“‹ */
    .lid{
      position:absolute; left:0; top:-22px;
      width:100%; height:34px;
      background: linear-gradient(180deg, #f06b6b, #cc4444);
      border:1px solid #00000022;
      border-radius:14px;
      transform-origin: 12% 90%;
      transform: rotate(0deg) translateY(0);
      transition: transform .55s cubic-bezier(.2,.8,.2,1);
      box-shadow: 0 10px 18px #00000044;
    }
    .gift.blue .lid{ background: linear-gradient(180deg, #6b9bff, #3f7cff); }
    .gift.green .lid{ background: linear-gradient(180deg, #4ad69a, #2fbf7a); }

    .bow{ position:absolute; left:50%; top:-10px; transform: translateX(-50%); width:44px; height:24px; pointer-events:none; }
    .bow:before, .bow:after{
      content:"";
      position:absolute;
      width:22px;height:16px;
      border-radius:999px;
      background: linear-gradient(180deg, #ffd36b, #f2b84d);
      box-shadow: inset 0 0 0 1px #0000001c;
      top:4px;
    }
    .bow:before{ left:0; transform: rotate(-18deg); }
    .bow:after{ right:0; transform: rotate(18deg); }
    .knot{
      position:absolute; left:50%; top:9px;
      transform: translateX(-50%);
      width:12px; height:12px; border-radius:6px;
      background: linear-gradient(180deg, #ffe7a7, #f2b84d);
      box-shadow: inset 0 0 0 1px #0000001c;
    }

    .surprise{
      position:absolute;
      left:50%;
      top:-10px;
      transform: translateX(-50%) translateY(20px) scale(.9);
      opacity:0;
      transition: opacity .28s ease, transform .55s cubic-bezier(.2,.8,.2,1);
      pointer-events:none;
      white-space:nowrap;
      font-weight:900;
      letter-spacing:.4px;
      text-shadow: 0 10px 20px #00000066;
      padding:6px 10px;
      border-radius:999px;
      border:1px solid #ffffff2a;
      background: radial-gradient(120px 40px at 50% 50%, #ffe49b55, #ffffff10);
      box-shadow: 0 0 26px #ffe49b55;
    }
    .gift.open .lid{ transform: rotate(-55deg) translate(-14px,-16px); }
    .gift.open .surprise{ opacity:1; transform: translateX(-50%) translateY(-44px) scale(1); }

    /* FX Canvasï¼ˆç…™ç«/è…³å°ï¼‰ */
    canvas#fx{ position:absolute; inset:0; pointer-events:none; z-index:4; }

    /* å°ç¶¿ç¾Šï¼ˆèµ°è·¯ï¼‰ */
    .sheep{
      position:absolute;
      left:-180px;
      bottom:44px;
      width:160px;
      height:120px;
      transform-origin:50% 100%;
      filter: drop-shadow(0 14px 18px #00000055);
      z-index:3;
    }
    .sheep.walking{ animation: sheepBob 0.9s ease-in-out infinite; }
    @keyframes sheepBob{ 0%,100%{ transform: translateY(0);} 50%{ transform: translateY(-5px);} }

    .sheep .body{
      position:absolute; left:18px; top:30px;
      width:118px; height:74px;
      background: radial-gradient(circle at 30% 30%, var(--sheep), var(--sheep2));
      border-radius: 999px;
      border:1px solid #00000018;
      box-shadow: inset 0 0 0 1px #ffffff22;
    }
    .puff{
      position:absolute;
      width:34px;height:34px;border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, #eef1ff 65%, #dfe6ff);
      border:1px solid #00000010;
    }
    .p1{ left:14px; top:24px; }
    .p2{ left:40px; top:18px; width:38px;height:38px; }
    .p3{ left:68px; top:24px; }
    .p4{ left:92px; top:36px; width:30px;height:30px; }
    .p5{ left:34px; top:44px; width:30px;height:30px; }
    .p6{ left:62px; top:48px; width:32px;height:32px; }

    .sheep .head{
      position:absolute; left:0; top:44px;
      width:52px; height:44px;
      background: linear-gradient(180deg, #2a2a33, #1d1d24);
      border-radius: 18px 18px 20px 20px;
      border:1px solid #00000033;
    }
    .ear{
      position:absolute;
      width:18px;height:16px;border-radius: 10px;
      background: linear-gradient(180deg, #2f2f3a, #1d1d24);
      top:6px;
      border:1px solid #00000033;
    }
    .ear:after{
      content:"";
      position:absolute; inset:3px;
      border-radius:8px;
      background: linear-gradient(180deg, var(--pink), #ff8fb0);
      opacity:.9;
    }
    .ear.l{ left:-10px; transform: rotate(-12deg); }
    .ear.r{ right:-10px; transform: rotate(12deg); }

    .face{
      position:absolute; left:10px; top:12px; right:10px; bottom:10px;
      display:flex; flex-direction:column; gap:6px; align-items:center;
    }
    .eyes{ display:flex; gap:10px; align-items:center; margin-top:2px; }
    .eye{
      width:8px;height:8px;border-radius:50%;
      background:#fff;
      position:relative;
      animation: blinkEye 4.2s infinite;
    }
    .eye:after{
      content:"";
      position:absolute; width:4px;height:4px;border-radius:50%;
      background:#000;
      left:2px; top:2px;
    }
    @keyframes blinkEye{ 0%,46%,48%,100%{ transform: scaleY(1);} 47%{ transform: scaleY(0.15);} }

    .nose{
      width:18px;height:12px;border-radius: 10px;
      background: linear-gradient(180deg, var(--pink), #ff87aa);
      border:1px solid #00000022;
    }
    .mouth{
      width:16px;height:10px;
      border-bottom:3px solid #ffffffaa;
      border-radius: 0 0 18px 18px;
      opacity:.9;
      transform: translateY(-2px);
    }

    .leg{
      position:absolute;
      width:12px;height:30px;border-radius:10px;
      background: linear-gradient(180deg, #2a2a33, #1d1d24);
      bottom:10px;
      border:1px solid #00000033;
      transform-origin: 50% 10%;
    }
    .leg.l1{ left:44px; }
    .leg.l2{ left:72px; height:28px; }
    .leg.l3{ left:100px; }
    .sheep.walking .leg{ animation: legSwing 0.45s ease-in-out infinite; }
    .sheep.walking .leg.l2{ animation-delay: .225s; }
    .sheep.walking .leg.l3{ animation-delay: .12s; }
    @keyframes legSwing{ 0%,100%{ transform: rotate(12deg);} 50%{ transform: rotate(-12deg);} }

    /* èªªæ˜åˆ— */
    .hint{
      display:flex; align-items:flex-start; justify-content:space-between;
      gap:12px; color:var(--muted); font-size:12.5px; line-height:1.5;
      padding:12px 14px; border-top:1px solid var(--line); background:#0a1a28aa;
    }
    .kbd{
      font-family: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      border:1px solid #ffffff22; border-bottom-color:#ffffff33;
      padding:2px 6px; border-radius:8px;
      color:#eaf3ffcc; background:#0b1c2caa;
    }

    /* Dialog */
    dialog{
      width:min(560px, calc(100% - 24px));
      border-radius:18px; border:1px solid #ffffff22;
      background: #0b1c2cf2; color:var(--text);
      box-shadow: 0 24px 70px #00000077; padding:0; overflow:hidden;
    }
    dialog::backdrop{
      background: radial-gradient(600px 400px at 50% 40%, #ffffff12, #000000aa);
      backdrop-filter: blur(4px);
    }
    .dlgHead{ padding:14px 16px; border-bottom:1px solid #ffffff18; display:flex; align-items:center; justify-content:space-between; gap:10px; }
    .dlgBody{ padding:16px; display:grid; gap:12px; }
    .row{ display:grid; gap:6px; }
    .row label{ font-size:12px; color:var(--muted); }
    input, textarea{
      width:100%; border-radius:14px; border:1px solid #ffffff22;
      background:#071827; color:var(--text);
      padding:10px 12px; outline:none;
    }
    textarea{ min-height:80px; resize:vertical; }
    .dlgFoot{
      padding:14px 16px; border-top:1px solid #ffffff18;
      display:flex; justify-content:flex-end; gap:10px; flex-wrap:wrap;
      background:#071827aa;
    }
    .btn2{
      border:1px solid #ffffff22; background:#0e1f30aa; color:var(--text);
      padding:10px 12px; border-radius:14px; cursor:pointer;
      transition: transform .12s ease, border-color .12s ease, background .12s ease;
    }
    .btn2:hover{ transform: translateY(-1px); border-color:#ffffff33; background:#112a41cc; }
    .btn2.danger{ border-color:#ff6b6b55; }
    .btn2.danger:hover{ border-color:#ff6b6b88; background:#311020cc; }
  
    /* è–èª•è€äººé›ªæ’¬ï¼ˆèƒŒæ™¯é£›è¡Œå‹•ç•«ï¼‰ */
    .santaFlight{
      position:absolute;
      left:-520px;
      top:54px;
      width:520px;
      height:150px;
      z-index:1; /* èƒŒæ™¯ï¼šåœ¨æ¨¹èˆ‡ç¦®ç‰©å¾Œé¢ */
      pointer-events:none;
      filter: drop-shadow(0 12px 16px #00000055);
      animation: sleighAcross 18s linear infinite;
      will-change: transform;
    }
    /* è®“é£›è¡Œè·¯å¾‘å¸¶ä¸€é»å¼§åº¦ + ä¸Šä¸‹èµ·ä¼ */
    @keyframes sleighAcross{
      0%   { transform: translateX(-560px) translateY(0px) rotate(-2deg); }
      18%  { transform: translateX(220px)  translateY(-10px) rotate(0deg); }
      45%  { transform: translateX(680px)  translateY(-22px) rotate(1deg); }
      70%  { transform: translateX(1100px) translateY(-10px) rotate(0deg); }
      100% { transform: translateX(1500px) translateY(4px) rotate(-1deg); }
    }
    .santaFlight .bob{
      position:absolute; inset:0;
      animation: sleighBob 1.2s ease-in-out infinite;
    }
    @keyframes sleighBob{
      0%,100%{ transform: translateY(0px); }
      50%{ transform: translateY(-6px); }
    }

    /* ç°¡åŒ–çš„é›ªæ©‡ + ç¦®ç‰© */
    .sleigh{
      position:absolute;
      right:0;
      top:58px;
      width:210px;
      height:70px;
    }
    .sleigh .body{
      position:absolute; left:40px; top:10px;
      width:135px; height:44px;
      border-radius:18px;
      background: linear-gradient(180deg, #d34b4b, #aa2f2f);
      border:1px solid #00000022;
      box-shadow: inset 0 0 0 1px #ffffff18;
    }
    .sleigh .seat{
      position:absolute; left:100px; top:0px;
      width:62px; height:36px;
      border-radius:16px 16px 14px 14px;
      background: linear-gradient(180deg, #b43a3a, #8f2727);
      border:1px solid #00000022;
    }
    .sleigh .runner{
      position:absolute; left:30px; bottom:2px;
      width:160px; height:14px;
      border-radius:999px;
      background: linear-gradient(180deg, #ffd36b, #f2b84d);
      box-shadow: inset 0 0 0 1px #0000001c;
    }
    .sleigh .runner:after{
      content:"";
      position:absolute; left:-10px; top:-5px;
      width:26px; height:22px;
      border-radius: 20px 0 0 20px;
      border:4px solid #f2b84d;
      border-right:none;
      transform: rotate(-18deg);
      opacity:.95;
    }
    .sleigh .gifts{
      position:absolute; left:0; top:6px;
      width:92px; height:56px;
      display:flex; gap:8px; align-items:flex-end;
    }
    .sleigh .giftMini{
      width:38px; height:34px;
      border-radius:10px;
      background: linear-gradient(180deg, #3f7cff, #2f58c7);
      border:1px solid #00000022;
      position:relative;
      box-shadow: 0 10px 14px #00000044;
    }
    .sleigh .giftMini.g2{ background: linear-gradient(180deg, #2fbf7a, #1f8e5a); height:38px; }
    .sleigh .giftMini:before, .sleigh .giftMini:after{
      content:"";
      position:absolute;
      background: linear-gradient(180deg, #ffd36b, #f2b84d);
      box-shadow: inset 0 0 0 1px #0000001c;
    }
    .sleigh .giftMini:before{ width:8px; height:100%; left:50%; transform: translateX(-50%); border-radius:8px; }
    .sleigh .giftMini:after{ height:8px; width:100%; top:45%; border-radius:8px; }

    /* Santaï¼ˆå¡é€šé ­åƒï¼‰ */
    .santa{
      position:absolute;
      right:42px;
      top:2px;
      width:60px; height:60px;
      transform: rotate(-3deg);
    }
    .santa .hat{
      position:absolute; left:10px; top:0;
      width:34px; height:22px;
      background: linear-gradient(180deg, #ff6b6b, #c93b3b);
      border-radius: 18px 18px 10px 10px;
      border:1px solid #00000022;
      transform: rotate(-12deg);
    }
    .santa .hat:after{
      content:"";
      position:absolute; right:-8px; top:10px;
      width:12px; height:12px; border-radius:50%;
      background: radial-gradient(circle at 30% 30%, #fff, #eef1ff);
      border:1px solid #00000012;
    }
    .santa .face{
      position:absolute; left:10px; top:16px;
      width:34px; height:32px;
      border-radius:16px;
      background: radial-gradient(circle at 30% 30%, #ffe0c2, #ffcfaa);
      border:1px solid #00000018;
    }
    .santa .beard{
      position:absolute; left:6px; top:28px;
      width:42px; height:30px;
      border-radius: 18px 18px 22px 22px;
      background: radial-gradient(circle at 30% 30%, #fff, #eef1ff);
      border:1px solid #00000010;
      box-shadow: inset 0 0 0 1px #ffffff1f;
    }
    .santa .eye{
      position:absolute; top:28px;
      width:6px; height:6px; border-radius:50%;
      background:#1a1a22;
    }
    .santa .eye.e1{ left:18px; }
    .santa .eye.e2{ left:30px; }
    .santa .nose{
      position:absolute; left:24px; top:34px;
      width:10px; height:8px; border-radius:10px;
      background: linear-gradient(180deg, #ffb8c8, #ff87aa);
      border:1px solid #00000012;
      opacity:.95;
    }

    /* é¦´é¹¿ï¼ˆç°¡åŒ–é€ å‹ï¼‰ */
    .reindeerGroup{
      position:absolute;
      right:200px;
      top:58px;
      width:250px;
      height:70px;
      display:flex;
      gap:18px;
      align-items:center;
      justify-content:flex-end;
    }
    .reindeer{
      width:48px; height:36px;
      position:relative;
      transform-origin:50% 80%;
      animation: deerGallop .45s ease-in-out infinite;
    }
    .reindeer:nth-child(2){ animation-delay:.12s; }
    .reindeer:nth-child(3){ animation-delay:.24s; }
    @keyframes deerGallop{ 0%,100%{ transform: translateY(0px) rotate(2deg);} 50%{ transform: translateY(-4px) rotate(-2deg);} }
    .reindeer .body{
      position:absolute; left:8px; top:10px;
      width:34px; height:18px;
      border-radius:999px;
      background: linear-gradient(180deg, #c88a5a, #9c643a);
      border:1px solid #00000022;
    }
    .reindeer .head{
      position:absolute; left:0; top:12px;
      width:14px; height:12px;
      border-radius:10px;
      background: linear-gradient(180deg, #b8794d, #8a5633);
      border:1px solid #00000022;
    }
    .reindeer .antler{
      position:absolute; left:2px; top:2px;
      width:12px; height:10px;
      border-top:3px solid #e6c18a;
      border-left:3px solid #e6c18a;
      border-radius:10px 0 0 0;
      transform: rotate(-15deg);
      opacity:.9;
    }
    .reindeer .leg{
      position:absolute; bottom:0;
      width:6px; height:14px; border-radius:8px;
      background: linear-gradient(180deg, #2a2a33, #1d1d24);
      border:1px solid #00000033;
      transform-origin: 50% 10%;
      animation: deerLeg .22s ease-in-out infinite;
    }
    .reindeer .leg.l1{ left:14px; }
    .reindeer .leg.l2{ left:28px; animation-delay:.11s; }
    @keyframes deerLeg{ 0%,100%{ transform: rotate(14deg);} 50%{ transform: rotate(-14deg);} }

    /* é€£æ¥ç¹© */
    .rope{
      position:absolute;
      right:170px;
      top:84px;
      width:250px;
      height:2px;
      background: linear-gradient(90deg, #ffffff00, #ffe49b88, #ffffff00);
      opacity:.65;
      transform: rotate(-2deg);
    }

  </style>
</head>

<body>
  <div class="snow" id="snow" aria-hidden="true"></div>

  <div class="wrap">
    <header>
      <div class="title">
        <h1>è–èª•å¿«æ¨‚</h1>
        
      </div>
      <div class="actions">
        <button class="btn" id="addLinkBtn" type="button">â• <span>æ–°å¢é€£çµ</span> <small>(Save)</small></button>
        <button class="btn" id="toggleBlink" type="button">âœ¨ <span>åˆ‡æ›ç‡ˆå…‰</span> <small>(Blink)</small></button>
        <button class="btn" id="openAll" type="button">ğŸ <span>å…¨éƒ¨æ‰“é–‹</span> <small>(Gifts)</small></button>
        <button class="btn" id="closeAll" type="button">ğŸ”’ <span>å…¨éƒ¨é—œä¸Š</span> <small>(Reset)</small></button>
      </div>
    </header>

    <div class="grid">
      <section class="card">
        <div class="cardHead">
          <div class="label"><span class="dot"></span><h2>å¿«é€Ÿé€£çµï¼ˆå¯ç·¨è¼¯ä¸¦ä¿å­˜ï¼‰</h2></div>
          <div class="label" style="gap:8px;color:var(--muted);font-size:12.5px;">
            <span>æç¤ºï¼š</span><span class="kbd">âœï¸ ç·¨è¼¯</span><span class="kbd">ğŸ—‘ åˆªé™¤</span>
          </div>
        </div>

        <div class="cardBody"><div class="links" id="links"></div></div>

        <div class="hint">
          <div>æ“ä½œï¼šé»å¡ç‰‡é–‹æ–°åˆ†é ï¼›é»ã€Œâœï¸ã€ç·¨è¼¯ï¼›é»ã€ŒğŸ—‘ã€åˆªé™¤ï¼›é»ä¸Šæ–¹ã€Œæ–°å¢é€£çµã€å¯åŠ å…¥æ–°å¡ç‰‡ä¸¦ä¿å­˜ã€‚</div>
          <div>å¿«æ·éµï¼š<span class="kbd">L</span> åˆ‡ç‡ˆã€<span class="kbd">O</span> å…¨é–‹ã€<span class="kbd">R</span> é‡ç½®</div>
        </div>
      </section>

      <section class="sceneWrap">
        <div class="card">
          <div class="cardHead">
            <div class="label"><span class="dot"></span><h2>è–èª•å‹•ç•«</h2></div>
            <div class="label" style="gap:8px;color:var(--muted);font-size:12.5px;"><span id="blinkState">Lights: ON</span></div>
          </div>

          <div class="scene" id="scene" role="img" aria-label="è–èª•æ¨¹ã€é–ƒçˆç‡ˆã€å°ç¶¿ç¾Šèµ°è·¯èˆ‡è…³å°ã€ç¦®ç‰©ç›’æ‰“é–‹èˆ‡ç…™ç«å‹•ç•«">
            <canvas id="fx"></canvas>

            <div class="sheep walking" id="sheep" aria-hidden="true">
              <div class="puff p1"></div><div class="puff p2"></div><div class="puff p3"></div>
              <div class="puff p4"></div><div class="puff p5"></div><div class="puff p6"></div>
              <div class="body"></div>
              <div class="head">
                <div class="ear l"></div><div class="ear r"></div>
                <div class="face">
                  <div class="eyes"><div class="eye"></div><div class="eye"></div></div>
                  <div class="nose"></div><div class="mouth"></div>
                </div>
              </div>
              <div class="leg l1"></div><div class="leg l2"></div><div class="leg l3"></div>
            </div>

            <div class="tree" id="tree">
              <div class="star" aria-hidden="true"></div>
              <div class="layer l1"></div><div class="layer l2"></div><div class="layer l3"></div>
              <div class="trunk"></div>
              <div class="lights" id="lights" aria-hidden="true"></div>
            </div>

            <div class="gifts">
              <div class="gift" data-gift="1" title="é»æˆ‘æ‰“é–‹ / é—œä¸Š">
                <div class="lid"></div><div class="ribbonV"></div><div class="ribbonH"></div>
                <div class="bow"><div class="knot"></div></div>
                <div class="surprise">Merry Christmas!</div>
              </div>
              <div class="gift blue" data-gift="2" title="é»æˆ‘æ‰“é–‹ / é—œä¸Š">
                <div class="lid"></div><div class="ribbonV"></div><div class="ribbonH"></div>
                <div class="bow"><div class="knot"></div></div>
                <div class="surprise">Merry Christmas!</div>
              </div>
              <div class="gift green" data-gift="3" title="é»æˆ‘æ‰“é–‹ / é—œä¸Š">
                <div class="lid"></div><div class="ribbonV"></div><div class="ribbonH"></div>
                <div class="bow"><div class="knot"></div></div>
                <div class="surprise">Merry Christmas!</div>
              </div>
            </div>

            <div class="ground" aria-hidden="true"></div>
          </div>

          </div>
      </section>
    </div>
  </div>

  <dialog id="dlg">
    <div class="dlgHead">
      <strong id="dlgTitle">ç·¨è¼¯é€£çµ</strong>
      <button class="btn2" id="dlgClose" type="button">âœ–</button>
    </div>
    <div class="dlgBody">
      <div class="row"><label>åœ–ç¤ºï¼ˆEmojiï¼‰</label><input id="fIcon" placeholder="ä¾‹å¦‚ï¼šğŸ”" /></div>
      <div class="row"><label>æ¨™é¡Œ</label><input id="fTitle" placeholder="ä¾‹å¦‚ï¼šGoogle" /></div>
      <div class="row"><label>æ¨™ç±¤</label><input id="fTag" placeholder="ä¾‹å¦‚ï¼šWork" /></div>
      <div class="row"><label>ç¶²å€ï¼ˆhttps://...ï¼‰</label><input id="fUrl" placeholder="ä¾‹å¦‚ï¼šhttps://www.google.com" /></div>
      <div class="row"><label>æè¿°ï¼ˆå¯ç•™ç©ºï¼‰</label><textarea id="fDesc" placeholder="ä¾‹å¦‚ï¼šå¿«é€Ÿæœå°‹è³‡æ–™"></textarea></div>
    </div>
    <div class="dlgFoot">
      <button class="btn2 danger" id="dlgDelete" type="button">ğŸ—‘ åˆªé™¤</button>
      <button class="btn2" id="dlgCancel" type="button">å–æ¶ˆ</button>
      <button class="btn2" id="dlgSave" type="button">ä¿å­˜</button>
    </div>
  </dialog>

  <script>
    (function makeSnow(){
      const snow = document.getElementById('snow');
      const COUNT = 34;
      for(let i=0;i<COUNT;i++){
        const f = document.createElement('div');
        f.className = 'flake';
        const left = Math.random() * 100;
        const size = 4 + Math.random() * 6;
        const fallDur = 7 + Math.random() * 10;
        const driftDur = 2.4 + Math.random() * 2.8;
        const delay = Math.random() * 6;
        f.style.left = left + 'vw';
        f.style.width = size + 'px';
        f.style.height = size + 'px';
        f.style.opacity = (0.45 + Math.random()*0.5).toFixed(2);
        f.style.animationDuration = fallDur + 's, ' + driftDur + 's';
        f.style.animationDelay = delay + 's, ' + (delay/2) + 's';
        snow.appendChild(f);
      }
    })();

    const lightsEl = document.getElementById('lights');
    const blinkStateEl = document.getElementById('blinkState');
    let blinkOn = true;

    function addBulb(x, y, type, delay, dur){
      const b = document.createElement('div');
      b.className = 'bulb ' + type;
      b.style.left = x + '%';
      b.style.top = y + '%';
      b.style.animationDelay = delay + 's';
      b.style.animationDuration = dur + 's';
      lightsEl.appendChild(b);
    }

    (function buildLights(){
      const bulbs = [
        [48,18,'b4',0.0,1.1],[55,22,'b1',0.2,1.3],[41,24,'b2',0.35,1.2],[50,28,'b3',0.1,1.25],
        [60,30,'b2',0.25,1.15],[37,31,'b1',0.4,1.35],
        [33,42,'b3',0.1,1.35],[42,45,'b4',0.2,1.15],[52,46,'b2',0.3,1.25],[62,44,'b1',0.4,1.3],[70,46,'b4',0.15,1.1],
        [27,52,'b2',0.35,1.2],[38,56,'b1',0.1,1.25],[50,55,'b3',0.2,1.15],[62,56,'b4',0.3,1.3],[74,55,'b2',0.4,1.2],
        [22,70,'b4',0.15,1.25],[33,73,'b2',0.3,1.15],[44,75,'b1',0.45,1.3],[56,74,'b3',0.2,1.1],[68,73,'b4',0.35,1.25],[80,71,'b2',0.4,1.2],
        [28,82,'b1',0.1,1.15],[40,84,'b3',0.25,1.35],[52,84,'b2',0.4,1.2],[64,83,'b1',0.2,1.1],[76,81,'b3',0.35,1.3],
      ];
      bulbs.forEach(([x,y,t,d,du]) => addBulb(x,y,t,d,du));
    })();

    function setBlink(on){
      blinkOn = on;
      const bulbs = lightsEl.querySelectorAll('.bulb');
      bulbs.forEach(b=>{
        b.style.animationPlayState = on ? 'running' : 'paused';
        b.style.opacity = on ? '' : '0.55';
      });
      blinkStateEl.textContent = 'Lights: ' + (on ? 'ON' : 'OFF');
    }
    document.getElementById('toggleBlink').addEventListener('click', ()=> setBlink(!blinkOn));
    setBlink(true);

    const scene = document.getElementById('scene');
    const canvas = document.getElementById('fx');
    const ctx = canvas.getContext('2d', { alpha:true });

    function resizeCanvas(){
      const r = scene.getBoundingClientRect();
      canvas.width = Math.floor(r.width * devicePixelRatio);
      canvas.height = Math.floor(r.height * devicePixelRatio);
      canvas.style.width = r.width + 'px';
      canvas.style.height = r.height + 'px';
      ctx.setTransform(devicePixelRatio,0,0,devicePixelRatio,0,0);
    }
    window.addEventListener('resize', resizeCanvas);
    resizeCanvas();

    const particles = [];
    const footprints = [];
    function rand(min,max){ return min + Math.random()*(max-min); }

    function spawnFirework(x, y){
      const bursts = 44;
      for(let i=0;i<bursts;i++){
        const a = rand(0, Math.PI*2);
        const sp = rand(1.6, 5.4);
        const life = rand(520, 980);
        particles.push({
          x, y,
          vx: Math.cos(a)*sp,
          vy: Math.sin(a)*sp - rand(0.8, 2.0),
          g: rand(0.03, 0.07),
          r: rand(2.0, 3.6),
          life,
          born: performance.now(),
          hue: [0,35,120,200,45][Math.floor(Math.random()*5)],
          tw: rand(0.04, 0.12)
        });
      }
      particles.push({ ring:true, x,y, rr: 6, grow: 2.7, life: 260, born: performance.now(), hue: 45 });
    }

    function addFootprint(x, y, flip){
      footprints.push({ x, y, flip, o: 0.55, born: performance.now(), life: 3400 });
      if(footprints.length > 90) footprints.splice(0, footprints.length - 90);
    }

    function drawFootprint(fp, t){
      const age = t - fp.born;
      const k = age / fp.life;
      const o = Math.max(0, (1-k)) * fp.o;

      ctx.save();
      ctx.translate(fp.x, fp.y);
      ctx.rotate(fp.flip ? -0.08 : 0.08);

      ctx.fillStyle = `rgba(190, 215, 255, ${o})`;
      ctx.shadowBlur = 8;
      ctx.shadowColor = `rgba(167, 215, 255, ${o})`;

      ctx.beginPath();
      ctx.ellipse(0, 0, 9, 5.5, 0.2, 0, Math.PI*2);
      ctx.fill();

      ctx.beginPath();
      ctx.ellipse(10, -3, 3.3, 2.2, 0, 0, Math.PI*2);
      ctx.fill();

      ctx.restore();
    }

    function stepFx(t){
      ctx.clearRect(0,0,canvas.width,canvas.height);

      ctx.save();
      ctx.globalCompositeOperation = 'source-over';
      for(let i=footprints.length-1;i>=0;i--){
        const fp = footprints[i];
        if(t - fp.born > fp.life){ footprints.splice(i,1); continue; }
        drawFootprint(fp, t);
      }
      ctx.restore();

      ctx.save();
      ctx.globalCompositeOperation = 'lighter';
      for(let i=particles.length-1;i>=0;i--){
        const p = particles[i];
        const age = t - p.born;
        if(age > p.life){ particles.splice(i,1); continue; }

        if(p.ring){
          const k = age / p.life;
          p.rr += p.grow;
          const o = (1-k) * 0.9;
          ctx.beginPath();
          ctx.arc(p.x, p.y, p.rr, 0, Math.PI*2);
          ctx.strokeStyle = `hsla(${p.hue}, 95%, 70%, ${o})`;
          ctx.lineWidth = 2;
          ctx.shadowBlur = 18;
          ctx.shadowColor = `hsla(${p.hue}, 95%, 70%, ${o})`;
          ctx.stroke();
          continue;
        }

        p.vy += p.g;
        p.x += p.vx;
        p.y += p.vy;

        const k = age / p.life;
        const twinkle = (Math.sin(age*0.02) * p.tw + 1);
        const o = (1-k) * 0.95 * twinkle;

        ctx.beginPath();
        ctx.arc(p.x, p.y, p.r, 0, Math.PI*2);
        ctx.fillStyle = `hsla(${p.hue}, 95%, 65%, ${o})`;
        ctx.shadowBlur = 16;
        ctx.shadowColor = `hsla(${p.hue}, 95%, 65%, ${o})`;
        ctx.fill();
      }
      ctx.restore();

      requestAnimationFrame(stepFx);
    }
    requestAnimationFrame(stepFx);

    const gifts = Array.from(document.querySelectorAll('.gift'));
    function fireAtGift(g){
      const sr = scene.getBoundingClientRect();
      const gr = g.getBoundingClientRect();
      const x = (gr.left + gr.width/2) - sr.left;
      const y = (gr.top) - sr.top - 10;
      spawnFirework(x, y);
    }
    function openGift(g){ if(!g.classList.contains('open')){ g.classList.add('open'); fireAtGift(g);} }
    function closeGift(g){ g.classList.remove('open'); }
    function toggleGift(g){
      const willOpen = !g.classList.contains('open');
      g.classList.toggle('open');
      if(willOpen) fireAtGift(g);
    }
    gifts.forEach(g => g.addEventListener('click', ()=> toggleGift(g)));
    document.getElementById('openAll').addEventListener('click', ()=> gifts.forEach(openGift));
    document.getElementById('closeAll').addEventListener('click', ()=> gifts.forEach(closeGift));

    window.addEventListener('keydown', (e)=>{
      const k = e.key.toLowerCase();
      if(k === 'l') setBlink(!blinkOn);
      if(k === 'o') gifts.forEach(openGift);
      if(k === 'r') gifts.forEach(closeGift);
    });

    const sheep = document.getElementById('sheep');
    let sheepX = -180;
    let sheepDir = 1;
    let lastStepAt = 0;
    const stepInterval = 420;
    const speed = 22;

    function sheepLoop(t){
      const r = scene.getBoundingClientRect();
      const maxX = r.width + 180;

      if(!sheepLoop.last) sheepLoop.last = t;
      const dt = (t - sheepLoop.last) / 1000;
      sheepLoop.last = t;

      sheepX += sheepDir * speed * dt;
      const facing = sheepDir === 1 ? 1 : -1;
      sheep.style.transform = `translateX(${sheepX}px) scaleX(${facing})`;

      if(t - lastStepAt > stepInterval){
        lastStepAt = t;
        const y = r.height - 48;
        const x = sheepX + 70;
        const flip = ((Math.floor(t / stepInterval) % 2) === 0);
        addFootprint(x, y, flip);
      }

      if(sheepX > maxX){ sheepDir = -1; sheepX = maxX; }
      else if(sheepX < -180){ sheepDir = 1; sheepX = -180; }

      requestAnimationFrame(sheepLoop);
    }
    requestAnimationFrame(sheepLoop);

    // localStorage CRUD
    const LS_KEY = 'xmas_quick_links_v2';
    const defaultLinks = [
      { icon:'ğŸ”', title:'Google', tag:'Search', url:'https://www.google.com', desc:'å¿«é€Ÿæœå°‹è³‡æ–™ã€æŸ¥è¦æ ¼ã€æ‰¾æ–‡ä»¶ã€‚' },
      { icon:'â–¶ï¸', title:'YouTube', tag:'Video', url:'https://www.youtube.com', desc:'æŸ¥æ•™å­¸ã€çœ‹éŸ³æ¨‚ã€æ”¾é¬†ä¸€ä¸‹ã€‚' },
      { icon:'âœ‰ï¸', title:'Gmail', tag:'Mail', url:'https://mail.google.com', desc:'ä¿¡ä»¶è™•ç†èˆ‡é€šçŸ¥é›†ä¸­ç®¡ç†ã€‚' },
      { icon:'ğŸ“…', title:'Calendar', tag:'Plan', url:'https://calendar.google.com', desc:'æ’ç¨‹ã€æé†’ã€è¡Œç¨‹ä¸€éµæŸ¥çœ‹ã€‚' },
      { icon:'ğŸ¤–', title:'ChatGPT', tag:'Work', url:'https://chat.openai.com', desc:'å¿«é€Ÿå•ç­”ã€æ•´ç†è³‡æ–™ã€ç”¢å‡ºè‰ç¨¿ã€‚' },
      { icon:'ğŸ—‚ï¸', title:'Notion', tag:'Notes', url:'https://www.notion.so', desc:'ç­†è¨˜ã€å°ˆæ¡ˆã€è³‡æ–™åº«èˆ‡æ¨¡æ¿ã€‚' },
    ];

    function loadLinks(){
      try{
        const raw = localStorage.getItem(LS_KEY);
        if(!raw) return [...defaultLinks];
        const parsed = JSON.parse(raw);
        if(!Array.isArray(parsed)) return [...defaultLinks];
        return parsed.map(x => ({
          icon: (x.icon || 'ğŸ”—').toString().slice(0,3),
          title: (x.title || 'Untitled').toString().slice(0,50),
          tag: (x.tag || '').toString().slice(0,20),
          url: (x.url || '').toString().slice(0,300),
          desc: (x.desc || '').toString().slice(0,120),
        }));
      }catch(_){ return [...defaultLinks]; }
    }
    function saveLinks(list){ localStorage.setItem(LS_KEY, JSON.stringify(list)); }

    let linkData = loadLinks();
    const linksEl = document.getElementById('links');

    function safeUrl(u){
      const s = (u || '').trim();
      if(!s) return '';
      if(/^https?:\/\//i.test(s)) return s;
      return 'https://' + s;
    }
    function escapeHtml(s){
      return String(s)
        .replaceAll('&','&amp;')
        .replaceAll('<','&lt;')
        .replaceAll('>','&gt;')
        .replaceAll('"','&quot;')
        .replaceAll("'","&#039;");
    }

    function renderLinks(){
      linksEl.innerHTML = '';
      linkData.forEach((item, idx)=>{
        const a = document.createElement('a');
        a.className = 'link';
        a.href = safeUrl(item.url) || '#';
        a.target = '_blank';
        a.rel = 'noreferrer';

        const top = document.createElement('div');
        top.className = 't';

        const left = document.createElement('div');
        left.className = 'left';
        left.innerHTML = `<span>${escapeHtml(item.icon || 'ğŸ”—')}</span><span>${escapeHtml(item.title || 'Untitled')}</span>`;

        const badge = document.createElement('span');
        badge.className = 'badge';
        badge.textContent = item.tag || 'Link';

        const tools = document.createElement('div');
        tools.className = 'tools';

        const edit = document.createElement('button');
        edit.className = 'iconBtn';
        edit.type = 'button';
        edit.textContent = 'âœï¸';
        edit.title = 'ç·¨è¼¯';
        edit.addEventListener('click', (e)=>{
          e.preventDefault(); e.stopPropagation();
          openDialog('edit', idx);
        });

        const del = document.createElement('button');
        del.className = 'iconBtn';
        del.type = 'button';
        del.textContent = 'ğŸ—‘';
        del.title = 'åˆªé™¤';
        del.addEventListener('click', (e)=>{
          e.preventDefault(); e.stopPropagation();
          deleteLink(idx);
        });

        tools.appendChild(edit);
        tools.appendChild(del);

        top.appendChild(left);
        top.appendChild(badge);
        top.appendChild(tools);

        const d = document.createElement('div');
        d.className = 'd';
        d.textContent = item.desc || '';

        a.appendChild(top);
        a.appendChild(d);

        linksEl.appendChild(a);
      });
    }

    function deleteLink(idx){
      linkData.splice(idx, 1);
      saveLinks(linkData);
      renderLinks();
    }

    const dlg = document.getElementById('dlg');
    const dlgTitle = document.getElementById('dlgTitle');
    const fIcon = document.getElementById('fIcon');
    const fTitle = document.getElementById('fTitle');
    const fTag = document.getElementById('fTag');
    const fUrl = document.getElementById('fUrl');
    const fDesc = document.getElementById('fDesc');
    const dlgDelete = document.getElementById('dlgDelete');

    let dlgMode = 'add';
    let dlgIndex = -1;

    function openDialog(mode, idx){
      dlgMode = mode;
      dlgIndex = (typeof idx === 'number') ? idx : -1;

      const isEdit = (mode === 'edit' && dlgIndex >= 0);
      dlgTitle.textContent = isEdit ? 'ç·¨è¼¯é€£çµ' : 'æ–°å¢é€£çµ';
      dlgDelete.style.display = isEdit ? 'inline-block' : 'none';

      const item = isEdit ? linkData[dlgIndex] : {icon:'ğŸ”—',title:'',tag:'',url:'',desc:''};
      fIcon.value = item.icon || 'ğŸ”—';
      fTitle.value = item.title || '';
      fTag.value = item.tag || '';
      fUrl.value = item.url || '';
      fDesc.value = item.desc || '';

      dlg.showModal();
      fTitle.focus();
    }
    function closeDialog(){ if(dlg.open) dlg.close(); }

    document.getElementById('addLinkBtn').addEventListener('click', ()=> openDialog('add'));
    document.getElementById('dlgClose').addEventListener('click', closeDialog);
    document.getElementById('dlgCancel').addEventListener('click', closeDialog);

    dlgDelete.addEventListener('click', ()=>{
      if(dlgMode === 'edit' && dlgIndex >= 0){ deleteLink(dlgIndex); closeDialog(); }
    });

    document.getElementById('dlgSave').addEventListener('click', ()=>{
      const item = {
        icon: (fIcon.value || 'ğŸ”—').trim().slice(0,3),
        title: (fTitle.value || 'Untitled').trim().slice(0,50),
        tag: (fTag.value || 'Link').trim().slice(0,20),
        url: (fUrl.value || '').trim().slice(0,300),
        desc: (fDesc.value || '').trim().slice(0,120),
      };
      if(!item.url){ alert('è«‹è¼¸å…¥ç¶²å€ï¼ˆURLï¼‰ã€‚'); return; }

      if(dlgMode === 'edit' && dlgIndex >= 0) linkData[dlgIndex] = item;
      else linkData.unshift(item);

      saveLinks(linkData);
      renderLinks();
      closeDialog();
    });

    renderLinks();
  </script>
</body>
</html>
